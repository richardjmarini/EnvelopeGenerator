.SUBCKT LM393 INP INM VCC VEE OUT

* --- Bounded comparator core ---
* Produces about Â±5 V max, regardless of input abuse
BERR ERR 0 V={5*tanh(200*V(INP,INM))}

* DC path for solver
RERR ERR 0 1Meg

* --- Output NPN open collector ---
QOUT OUT BASE VEE QNPN
RB BASE ERR 10k
RBLEED BASE VEE 100k

* Output leakage (prevents floating nodes)
RLEAK OUT VEE 100Meg

.model QNPN NPN Is=1e-15 Bf=100 Vaf=100 Cjc=2p Cje=5p

.ENDS LM393

